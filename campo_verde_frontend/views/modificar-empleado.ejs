<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Modificar Empleado</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        h1 {
            color: #333;
        }

        label {
            display: inline-block;
            width: 150px;
            font-weight: bold;
        }

        input[type="text"],
        input[type="number"],
        select {
            padding: 6px;
            width: 250px;
            margin-bottom: 10px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }

        button:hover {
            background-color: #45a049;
        }

        .btn-volver {
            display: inline-block;
            margin-top: 20px;
            text-decoration: none;
            color: #2196F3;
            font-size: 16px;
        }

        .btn-volver:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

    <h1>Modificar Empleado</h1>

    <!-- Formulario actualizado -->
    <form id="formulario" action="/empleados/actualizar/<%= empleado.dniEmpleado %>" method="POST" onsubmit="return confirmarModificacion()">
        <input type="hidden" name="dniEmpleado" value="<%= empleado.dniEmpleado %>">

        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" value="<%= empleado.nombre %>" required><br><br>

        <label for="apellido">Apellido:</label>
        <input type="text" id="apellido" name="apellido" value="<%= empleado.apellido %>" required><br><br>

        <label for="tipo">Tipo de Empleado:</label>
        <select id="tipo" name="tipo" required>
            <option value="">Selecciona tipo</option>
            <option value="Administrativo" <%= empleado.tipo === "Administrativo" ? 'selected' : '' %>>Administrativo</option>
            <option value="Vendedor" <%= empleado.tipo === "Vendedor" ? 'selected' : '' %>>Vendedor</option>
            <option value="Gerente" <%= empleado.tipo === "Gerente" ? 'selected' : '' %>>Gerente</option>
        </select><br><br>

        <label for="sueldo">Sueldo:</label>
        <input type="number" step="0.01" id="sueldo" name="sueldo" value="<%= empleado.sueldo %>" required><br><br>

        <label for="direccion">Dirección:</label>
        <input type="text" id="direccion" name="direccion" value="<%= empleado.direccion %>" required><br><br>

        <!-- Campo corregido - Usa el campo plano del JSON -->
        <label for="dniSupervisor">DNI del Supervisor:</label>
        <input type="number" id="dniSupervisor" name="dniSupervisor"
               value="<%= empleado.dniSupervisor || '' %>"><br><br>

        <button type="submit">Guardar Cambios</button>
    </form>

    <br>
    <a href="/empleados" class="btn-volver">⬅️ Volver al listado</a>

    <script>
        function confirmarModificacion() {
            return confirm("¿Está seguro de que quiere modificar este empleado?");
        }
    </script>

</body>
</html>